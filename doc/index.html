<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Index</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Index</h1>
    
    


    


    <h3> </h3>









    




    <section>
        <article><h1>Bit-Shadow Machine: A JavaScript framework for creating particle and frame-based animation.</h1>

<p>Bit-Shadow Machine renders particles in a web browser using CSS box shadows. That&#39;s it. No HTML5 Canvas, WebGL or even a single DOM element.</p>

<p>By default, the box shadows are attached to your document&#39;s body. Freed from parsing the render tree, the browser can animate many more particles than with conventional methods. You should be able to easily render several hundred particles at 60 frames per second.</p>

<p>View a demo at http://www.bitshadowmachine.com</p>

<h2>Create a Simple System</h2>

<p>Think of a Bit-Shadow Machine as a rendering engine. You supply the particles to animate. It takes care of drawing them on screen.</p>

<p>To setup a simple Bit-Shadow Machine, reference BitShadowMachine.min.js and Modernizr.min.js from a script tag in the &amp;lt;head&amp;gt; of your document.</p>

<p>Also, reference the bitshadowmachine.css file.</p>

<p>In the body, add a &amp;lt;script&amp;gt; tag and create a new Bit-Shadow system. Pass the system a function that adds items to the system.</p>

<p>IMPORTANT: Your items must extend the BitShadowMachine.Item class.</p>

<p><code></code>`html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
  &lt;title&gt;Bit-Shadow Machine&lt;/title&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;css/BitShadowMachine.min.css&quot; type=&quot;text/css&quot; charset=&quot;utf-8&quot; /&gt;
  &lt;script src=&quot;scripts/Modernizr.min.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
  &lt;script src=&quot;scripts/BitShadowMachine.min.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;script type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;</p>

<pre><code>  function Box(opt_options) {
    var options = opt_options || {};
    options.name = &#39;Box&#39;;
    BitShadowMachine.Item.call(this, options);
  }
  BitShadowMachine.Utils.extend(Box, BitShadowMachine.Item);

  // An init() method is required.
  Box.prototype.init = function(options) {
    this.color = options.color || [100, 100, 100];
    this.location = options.location || new BitShadowMachine.Vector(this.world.width / 2, this.world.height / 2);
  };

  /**
   * Tell BitShadowMachine where to find classes.
   */
  BitShadowMachine.Classes = {
    Box: Box
  };

  var worldA = new BitShadowMachine.World();

  /**
   * Create a new BitShadowMachine system.
   */
  BitShadowMachine.System.init(function() {
    this.add(&#39;Box&#39;);
  }, null, Modernizr);
&lt;/script&gt;</code></pre>

<p>  &lt;/body&gt;
&lt;/html&gt;
<code></code>`</p>

<p>Notice we&#39;re defining a Box class that extends BitShadowMachine.Item. The class must also have an init() method to set additional properties.</p>

<p>Loading the above, you should see a gray box in the middle of the browser. View it at <a href="http://foldi.github.io/Bit-Shadow-Machine/simple.html">public/simple.html</a>.</p>

<h2>Animation</h2>

<p>Let&#39;s make the box move.</p>

<p><code></code>`html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
  &lt;title&gt;Bit-Shadow Machine&lt;/title&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;css/BitShadowMachine.min.css&quot; type=&quot;text/css&quot; charset=&quot;utf-8&quot; /&gt;
  &lt;script src=&quot;scripts/Modernizr.min.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
  &lt;script src=&quot;scripts/BitShadowMachine.min.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;script type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;</p>

<pre><code>  function Box(opt_options) {
    var options = opt_options || {};
    options.name = &#39;Box&#39;;
    BitShadowMachine.Item.call(this, options);
  }
  BitShadowMachine.Utils.extend(Box, BitShadowMachine.Item);

  // An init() method is required.
  Box.prototype.init = function(options) {
    this.color = options.color || [100, 100, 100];
    this.location = options.location || new BitShadowMachine.Vector(this.world.width / 2, this.world.height / 2);
    this.acceleration = options.acceleration || new BitShadowMachine.Vector();
    this.velocity = options.velocity || new BitShadowMachine.Vector();
    this.mass = options.mass || 10;
    this.maxSpeed = typeof options.maxSpeed === &#39;undefined&#39; ? 10 : options.maxSpeed;
    this.minSpeed = options.minSpeed || 0;
    this.bounciness = options.bounciness || 1;
    this._force = new BitShadowMachine.Vector();
  };

  Box.prototype.step = function() {
    if (this.beforeStep) {
      this.beforeStep.call(this);
    }
    this.applyForce(this.world.gravity);
    this.velocity.add(this.acceleration);
    this.velocity.limit(this.maxSpeed, this.minSpeed);
    this.location.add(this.velocity);
    this._checkWorldEdges();
    this.acceleration.mult(0);
  };

  Box.prototype.applyForce = function(force) {
    if (force) {
      this._force.x = force.x;
      this._force.y = force.y;
      this._force.div(this.mass);
      this.acceleration.add(this._force);
      return this.acceleration;
    }
  };

  Box.prototype._checkWorldEdges = function() {
    if (this.location.y &gt; this.world.height) { // bottom
      this.velocity.mult(-this.bounciness);
      this.location.y = this.world.height;
      return;
    }
  };

  /**
   * Tell BitShadowMachine where to find classes.
   */
  BitShadowMachine.Classes = {
    Box: Box
  };

  var worldA = new BitShadowMachine.World();

  /**
   * Create a new BitShadowMachine system.
   */
  BitShadowMachine.System.init(function() {
    this.add(&#39;Box&#39;);
  }, null, Modernizr);
&lt;/script&gt;</code></pre>

<p>  &lt;/body&gt;
&lt;/html&gt;
<code></code>`</p>

<p>The Bit-Shadow Machine system will execute an item&#39;s step() method each iteration of the animation loop. In the example above, we&#39;ve added some additional properties and use them in the step() method to simulate a gravitationl force on the box. View it at <a href="http://foldi.github.io/Bit-Shadow-Machine/simple-anim.html">public/simple-anim.html</a>.</p>

<h2>Multiple items</h2>

<p>Now we&#39;ll see the power of the Bit-Shadow Machine. Replace the System.init() call with the following.</p>

<p><code>javascript
BitShadowMachine.System.init(function() {
  var getRandomNumber = BitShadowMachine.Utils.getRandomNumber;
  for (var i = 0; i &lt; 500; i++) {
    var scale = getRandomNumber(0.25, 2, true);
    this.add(&#39;Box&#39;, {
      location: new BitShadowMachine.Vector(getRandomNumber(0, worldA.width),
          getRandomNumber(0, worldA.height / 2)),
      opacity: BitShadowMachine.Utils.map(scale, 1, 2, 1, 0.25),
      scale: scale,
      mass: scale
    });
  }
}, null, Modernizr);
</code></p>

<p>We&#39;re adding 500 items with random scale and random location. We&#39;ve also inversely mapped scale and opacity so the largest items have the least opacity.</p>

<p>Press &#39;s&#39; on your keyboard. You should see a status menu appear in the top left that indicates the total number of objects and the current frame rate. You should see 501 items (the world counts as an item) and a frame rate close to 60 frames per second.</p>

<p>View it at <a href="http://foldi.github.io/Bit-Shadow-Machine/simple-anim-items.html">public/simple-anim-items.html</a>.</p>

<h2>Blur</h2>

<p>Since we&#39;re using CSS box-shadows, we can also apply blur to our items. Replace the System.init function with the following.</p>

<p><code>javascript
BitShadowMachine.System.init(function() {
  var getRandomNumber = BitShadowMachine.Utils.getRandomNumber;
  for (var i = 0; i &lt; 250; i++) {
    var scale = getRandomNumber(0.25, 2, true);
    this.add(&#39;Box&#39;, {
      location: new BitShadowMachine.Vector(getRandomNumber(0, worldA.width),
          getRandomNumber(0, worldA.height / 2)),
      opacity: BitShadowMachine.Utils.map(scale, 1, 2, 1, 0.25),
      scale: scale,
      mass: scale,
      beforeStep: function() {
        this.blur = BitShadowMachine.Utils.map(this.velocity.mag(), this.minSpeed, this.maxSpeed, 0, 100);
      }
    });
  }
}, null, Modernizr);
</code></p>

<p>We&#39;ve added a function as a beforeStep property that gets called from step(). In beforeStep, we&#39;re mapping the magnitude of the item&#39;s velocity to its min/max speed and producing a blur value between 0 and 100. Running the code you should see the items blur as they accelerate.</p>

<p>Rendering blur is an intensive operation that requires us to decrease the total number of items to maintain 60fps. View it at <a href="http://foldi.github.io/Bit-Shadow-Machine/simple-anim-blur.html">public/simple-anim-blur.html</a>.</p>

<p>Now step back and remember these animated items are all just CSS box shadows on the document body.</p>

<h2>A world</h2>

<p>A Bit-Shadow world can be any element that has a box shadow. In the example below, we&#39;ve placed a &amp;lt;div&amp;gt; in the body and passed in as the second argument to the System.init() method.</p>

<p><code></code>`html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
  &lt;title&gt;Bit-Shadow Machine&lt;/title&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;css/BitShadowMachine.min.css&quot; type=&quot;text/css&quot; charset=&quot;utf-8&quot; /&gt;
  &lt;script src=&quot;scripts/Modernizr.min.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
  &lt;script src=&quot;scripts/BitShadowMachine.min.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&#39;worldA&#39;&gt;&lt;/div&gt;
    &lt;script type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;</p>

<pre><code>  function Box(opt_options) {
    var options = opt_options || {};
    options.name = &#39;Box&#39;;
    BitShadowMachine.Item.call(this, options);
  }
  BitShadowMachine.Utils.extend(Box, BitShadowMachine.Item);

  // An init() method is required.
  Box.prototype.init = function(options) {
    this.color = options.color || [100, 100, 100];
    this.location = options.location || new BitShadowMachine.Vector(this.world.width / 2, this.world.height / 2);
  };

  /**
   * Tell BitShadowMachine where to find classes.
   */
  BitShadowMachine.Classes = {
    Box: Box
  };

  /**
   * Passes a reference to a DOM element as the world.
   */
  var worldA = new BitShadowMachine.World(document.getElementById(&#39;worldA&#39;), {
    width: 800,
    height: 600,
    backgroundColor: [0, 0, 0]
  });

  /**
   * Create a new BitShadowMachine system.
   */
  BitShadowMachine.System.init(function() {
    this.add(&#39;Box&#39;);
  }, worldA, Modernizr);
&lt;/script&gt;</code></pre>

<p>  &lt;/body&gt;
&lt;/html&gt;
<code></code>`</p>

<p>Notice we also get a menu by default. To suppress the menu, pass &#39;noMenu: true&#39; as an optional property when creating the world.</p>

<p>View it at <a href="http://foldi.github.io/Bit-Shadow-Machine/simple-world.html">public/simple-world.html</a>.</p>

<h2>Multple worlds</h2>

<p>Bit-Shadow Machine can support multiple worlds. Just pass them as an array to the second argument of System.init().</p>

<p><code></code>`html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
  &lt;title&gt;Bit-Shadow Machine&lt;/title&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;css/BitShadowMachine.min.css&quot; type=&quot;text/css&quot; charset=&quot;utf-8&quot; /&gt;
  &lt;script src=&quot;scripts/Modernizr.min.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
  &lt;script src=&quot;scripts/BitShadowMachine.min.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&#39;worldA&#39;&gt;&lt;/div&gt;
    &lt;div id=&#39;worldB&#39;&gt;&lt;/div&gt;
    &lt;div id=&#39;worldC&#39;&gt;&lt;/div&gt;
    &lt;script type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;</p>

<pre><code>  function Box(opt_options) {
    var options = opt_options || {};
    options.name = &#39;Box&#39;;
    BitShadowMachine.Item.call(this, options);
  }
  BitShadowMachine.Utils.extend(Box, BitShadowMachine.Item);

  // An init() method is required.
  Box.prototype.init = function(options) {
    this.color = options.color || [100, 100, 100];
    this.location = options.location || new BitShadowMachine.Vector(this.world.width / 2, this.world.height / 2);
    this.acceleration = options.acceleration || new BitShadowMachine.Vector();
    this.velocity = options.velocity || new BitShadowMachine.Vector();
    this.mass = options.mass || 10;
    this.maxSpeed = typeof options.maxSpeed === &#39;undefined&#39; ? 10 : options.maxSpeed;
    this.minSpeed = options.minSpeed || 0;
    this.bounciness = options.bounciness || 1;
    this._force = new BitShadowMachine.Vector();
  };

  Box.prototype.step = function() {
    if (this.beforeStep) {
      this.beforeStep.call(this);
    }
    this.applyForce(this.world.gravity);
    this.velocity.add(this.acceleration);
    this.velocity.limit(this.maxSpeed, this.minSpeed);
    this.location.add(this.velocity);
    this._checkWorldEdges();
    this.acceleration.mult(0);
  };

  Box.prototype.applyForce = function(force) {
    if (force) {
      this._force.x = force.x;
      this._force.y = force.y;
      this._force.div(this.mass);
      this.acceleration.add(this._force);
      return this.acceleration;
    }
  };

  Box.prototype._checkWorldEdges = function() {
    if (this.location.y &gt; this.world.height) { // bottom
      this.velocity.mult(-this.bounciness);
      this.location.y = this.world.height;
      return;
    }
  };

  /**
   * Tell BitShadowMachine where to find classes.
   */
  BitShadowMachine.Classes = {
    Box: Box
  };

  var viewportSize = BitShadowMachine.Utils.getWindowSize();

  /**
   * Passes a reference to a DOM element as the world.
   */
  var worldA = new BitShadowMachine.World(document.getElementById(&#39;worldA&#39;), {
    width: 320,
    height: 480,
    backgroundColor: [0, 0, 0],
    location: new BitShadowMachine.Vector(0, viewportSize.height / 2 - 240)
  });

  var worldB = new BitShadowMachine.World(document.getElementById(&#39;worldB&#39;), {
    width: 320,
    height: 480,
    backgroundColor: [50, 50, 50]
  });

  var worldC = new BitShadowMachine.World(document.getElementById(&#39;worldC&#39;), {
    width: 320,
    height: 480,
    backgroundColor: [100, 100, 100],
    location: new BitShadowMachine.Vector(viewportSize.width - 320, viewportSize.height / 2 - 240)
  });

  /**
   * Create a new BitShadowMachine system.
   */
  BitShadowMachine.System.init(function() {

    var getRandomNumber = BitShadowMachine.Utils.getRandomNumber;
    for (var i = 0; i &lt; 100; i++) {
      var scale = getRandomNumber(0.25, 2, true);
      this.add(&#39;Box&#39;, {
        location: new BitShadowMachine.Vector(getRandomNumber(0, worldA.width),
            getRandomNumber(0, worldA.height / 2)),
        opacity: BitShadowMachine.Utils.map(scale, 1, 2, 1, 0.25),
        scale: scale,
        mass: scale
      });
    }

    var getRandomNumber = BitShadowMachine.Utils.getRandomNumber;
    for (var i = 0; i &lt; 100; i++) {
      var scale = getRandomNumber(0.25, 2, true);
      this.add(&#39;Box&#39;, {
        location: new BitShadowMachine.Vector(getRandomNumber(0, worldA.width),
            getRandomNumber(0, worldA.height / 2)),
        opacity: BitShadowMachine.Utils.map(scale, 1, 2, 1, 0.25),
        scale: scale,
        mass: scale,
        color: [200, 200, 200]
      }, worldB);
    }

    var getRandomNumber = BitShadowMachine.Utils.getRandomNumber;
    for (var i = 0; i &lt; 100; i++) {
      var scale = getRandomNumber(0.25, 2, true);
      this.add(&#39;Box&#39;, {
        location: new BitShadowMachine.Vector(getRandomNumber(0, worldA.width),
            getRandomNumber(0, worldA.height / 2)),
        opacity: BitShadowMachine.Utils.map(scale, 1, 2, 1, 0.25),
        scale: scale,
        mass: scale,
        color: [0, 0, 0]
      }, worldC);
    }

  }, [worldA, worldB, worldC], Modernizr);
&lt;/script&gt;</code></pre>

<p>  &lt;/body&gt;
&lt;/html&gt;
<code></code>`</p>

<p>You should see three Bit-Shadow worlds each with their own set of animated items. View it at <a href="http://foldi.github.io/Bit-Shadow-Machine/simple-world-multiple.html">public/simple-world-multiple.html</a>.</p>

<h1>Building this project</h1>

<p>This project uses <a href="http://gruntjs.com">Grunt</a>. To build the project first install the node modules.</p>

<p><code>
npm install
</code></p>

<p>Next, run grunt.</p>

<p><code>
grunt
</code></p>

<p>A pre-commit hook is defined in /pre-commit that runs jshint. To use the hook, run the following:</p>

<p><code>
ln -s ../../pre-commit .git/hooks/pre-commit
</code></p>

<p>A post-commit hook is defined in /post-commit that runs the Plato complexity analysis tools. To use the hook, run the following:</p>

<p><code>
ln -s ../../post-commit .git/hooks/post-commit
</code></p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="Anim.html">Anim</a></li><li><a href="AnimUnit.html">AnimUnit</a></li><li><a href="ColorPalette.html">ColorPalette</a></li><li><a href="Item.html">Item</a></li><li><a href="StatsDisplay.html">StatsDisplay</a></li><li><a href="Vector.html">Vector</a></li><li><a href="World.html">World</a></li></ul><h3>Namespaces</h3><ul><li><a href="System.html">System</a></li><li><a href="Utils.html">Utils</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0</a> on Tue Dec 31 2013 16:03:45 GMT-0500 (EST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>